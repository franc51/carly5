<div class="history-below">
  <mat-tab-group fitInkBarToContent>
    <mat-tab label="Înmatriculare">
      <div class="register-form">
        <form
          action=""
          #form="ngForm"
          (ngSubmit)="handleSubmit(form)"
          class="formabro"
        >
          <mat-form-field color="accent">
            <mat-label>Nume Proprietar</mat-label>
            <input
              matInput
              #input
              maxlength="15"
              placeholder="Popescu"
              required
              name="ownerName"
              #ownerName="ngModel"
              [ngModel]="vehicle.ownerName"
              [ngModelOptions]="{ updateOn: 'submit' }"
            />
          </mat-form-field>

          <mat-form-field color="accent">
            <mat-label>Prenume Proprietar</mat-label>
            <input
              matInput
              #input
              maxlength="15"
              placeholder="Daniel"
              required
              name="ownerSurname"
              #ownerSurname="ngModel"
              [ngModel]="vehicle.ownerSurname"
            />
          </mat-form-field>

          <mat-form-field color="accent">
            <mat-label>Numar telefon</mat-label>
            <input
              matInput
              #input
              type="tel"
              minlength="10"
              maxlength="10"
              placeholder="0712345678"
              required
              name="ownerPhone"
              #ownerPhone="ngModel"
              [ngModel]="vehicle.ownerPhone"
            />
          </mat-form-field>

          <mat-form-field color="accent">
            <mat-label>E-mail</mat-label>
            <input
              matInput
              #input
              type="email"
              placeholder="david@yahoo.com"
              required
              type="ownerEmail"
              name="ownerEmail"
              #ownerEmail="ngModel"
              [ngModel]="ownerEmail"
            />
          </mat-form-field>

          <mat-form-field color="accent">
            <mat-label>Marca</mat-label>
            <mat-select
              name="vehicleManufacturer"
              value="vehicleManufacturer"
              #vehicleManufacturer="ngModel"
              [ngModel]="vehicle.vehicleManufacturer"
            >
              <mat-option value="VOLKSWAGEN">VOLKSWAGEN</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field color="accent">
            <mat-label>Model</mat-label>
            <mat-select
              name="vehicleModel"
              [ngModel]="vehicle.vehicleModel"
              value="vehicleModel"
              #vehicleModel="ngModel"
            >
              <mat-option value="GOLF">GOLF</mat-option>
              <mat-option value="PASSAT">PASSAT</mat-option>
              <mat-option value="ARTEON">ARTEON</mat-option>
              <mat-option value="TUAREG">TUAREG</mat-option>
              <mat-option value="CADDY">CADDY</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field color="accent">
            <mat-label>VIN</mat-label>
            <input
              matInput
              #input
              type="number"
              maxlength="10"
              required
              name="vehicleVinNumber"
              #vehicleVinNumber="ngModel"
              value="vehicleVinNumber"
              [ngModel]="vehicle.vehicleVinNumber"
            />
          </mat-form-field>

          <mat-form-field color="accent">
            <mat-label>Numar inmatriculare</mat-label>
            <input
              matInput
              type="text"
              class="input"
              name="numberPlate"
              oninput="this.value = this.value.toUpperCase()"
              required
              minlength="7"
              maxlength="7"
              [(ngModel)]="userInput"
            />
          </mat-form-field>

          <!-- Form validations -->

          <ng-container
            *ngIf="!this.isMatchingPattern(this.userInput) && form.submitted"
          >
            <p class="error">Numarul de înm. trebuie sa fie de forma LLCCLLL</p>
          </ng-container>

          <ng-container *ngIf="ownerName.invalid && form.submitted">
            <p class="error">Numele nu este valid</p>
          </ng-container>

          <ng-container *ngIf="ownerSurname.invalid && form.submitted">
            <p class="error">Prenumele nu este valid</p>
          </ng-container>

          <ng-container *ngIf="ownerPhone.invalid && form.submitted">
            <p class="error">Numărul de telefon nu este valid</p>
          </ng-container>

          <ng-container *ngIf="ownerEmail.invalid && form.submitted">
            <p class="error">Email invalid</p>
          </ng-container>

          <ng-container *ngIf="form.submitted && form.valid">
            <div class="green">
              <h3>Cerere trimisă cu succes!</h3>
            </div>
          </ng-container>

          <app-uploadcare></app-uploadcare>
          <button
            type="submit"
            mat-raised-button
            style="background-color: green; margin-bottom: 1rem; color: white"
          >
            <mat-icon>send</mat-icon>
            Trimite cerere
          </button>
        </form>
      </div>
    </mat-tab>
    <mat-tab label="Istoric înmatriculări">
      <div class="history-list">
        <ng-template
          *ngIf="
            vehicles.length;
            then historyRegistrations;
            else noRegistrations
          "
        >
        </ng-template>
      </div>

      <ng-template #noRegistrations>
        <p class="novehicles">Nu aveți vehicule inmatriculate</p>
      </ng-template>
      <ng-template #historyRegistrations class="history-card">
        <app-paginator></app-paginator>
      </ng-template>
    </mat-tab>
  </mat-tab-group>
</div>
